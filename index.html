<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>ğŸ’– Daily Tracker ğŸ’–</title>
<meta name="theme-color" content="#ff9ecd" />
<style>
:root {
  --pink:#ff9ecd;--deep-pink:#f472b6;--purple:#c084fc;
  --light-pink:#ffd5ec;--bg:#fff0f6;--text:#4a154b;
  --radius:18px;--shadow:0 8px 24px rgba(255,150,200,.25);
}
*{box-sizing:border-box;margin:0;padding:0;}
html,body{
  height:100%;
  scroll-behavior:smooth;
}
body {
  font-family:'Poppins',sans-serif;
  background:radial-gradient(circle at top left,var(--light-pink),var(--bg));
  color:var(--text);
  display:flex;
  flex-direction:column;
  min-height:100vh;
  overflow-x:hidden;
}

/* ğŸŒ¸ Floating Hearts Background */
.hearts {
  position:fixed;
  top:0; left:0;
  width:100%;
  height:100%;
  z-index:-1;
  overflow:hidden;
}
.heart {
  position:absolute;
  bottom:-10%;
  color:#ff9ecd;
  opacity:0.4;
  animation:floatHearts 10s linear infinite;
  font-size:1.5rem;
}
@keyframes floatHearts {
  0% {transform:translateY(0) rotate(0deg); opacity:0.5;}
  50% {opacity:1;}
  100% {transform:translateY(-110vh) rotate(360deg); opacity:0;}
}

/* ğŸŒˆ General Layout */
header {
  background:linear-gradient(90deg,var(--pink),var(--purple));
  color:#fff;
  text-align:center;
  padding:1rem;
  font-weight:700;
  box-shadow:var(--shadow);
  font-size:1.3rem;
  animation:fadeIn 1.5s ease;
}
nav {
  display:flex;
  justify-content:space-around;
  background:#fff;
  box-shadow:0 2px 6px rgba(0,0,0,.08);
  position:sticky;
  top:0;
  z-index:10;
  flex-wrap:wrap;
  animation:slideIn 1s ease;
}
nav button {
  flex:1;
  border:none;
  background:none;
  padding:.9rem 0;
  font-weight:600;
  color:var(--text);
  cursor:pointer;
  transition:background .3s,color .3s,transform .2s;
}
nav button.active {
  color:#fff;
  background:linear-gradient(90deg,var(--pink),var(--deep-pink));
  transform:scale(1.05);
}
main {
  flex:1;
  width:100%;
  max-width:900px;
  margin:auto;
  padding:1rem;
  display:flex;
  flex-direction:column;
  gap:1.2rem;
  animation:fadeUp 1.5s ease;
}
.card {
  background:#fff;
  border-radius:var(--radius);
  padding:1.2rem;
  box-shadow:var(--shadow);
  animation:popIn 1.2s ease;
}
input,textarea,select,button {
  width:100%;
  padding:.8rem 1rem;
  margin-top:.4rem;
  border-radius:10px;
  border:1px solid var(--light-pink);
  font-family:inherit;
  font-size:1rem;
}
input:focus,textarea:focus,select:focus {
  border-color:var(--pink);
  box-shadow:0 0 6px var(--pink);
}
button.save {
  background:linear-gradient(90deg,var(--pink),var(--deep-pink));
  color:#fff;
  border:none;
  font-weight:600;
  margin-top:.8rem;
  cursor:pointer;
  transition:transform .2s,box-shadow .3s;
}
button.save:hover {
  transform:scale(1.05);
  box-shadow:0 0 10px rgba(255,150,200,0.5);
}
section {display:none;flex-direction:column;gap:1rem;}
section.active {display:flex;}
#symptomsBox {display:flex;flex-wrap:wrap;gap:.5rem;}
#symptomsBox label {
  background:#ffe8f3;
  border-radius:8px;
  padding:4px 10px;
}
.tip {
  margin-top:.6rem;
  color:var(--deep-pink);
  font-weight:500;
  animation:fadeIn 1.5s ease;
}

/* LOGIN FIX */
#loginCard {
  max-width:380px;
  width:90%;
  margin:2rem auto 3rem auto;
  display:flex;
  flex-direction:column;
  justify-content:center;
}

/* FOOTER FIXED TO BOTTOM */
.footer {
  background:linear-gradient(90deg,var(--pink),var(--purple));
  color:#fff;
  text-align:center;
  padding:1rem .5rem;
  font-size:1rem;
  box-shadow:0 -2px 8px rgba(255,150,200,.3);
  animation:fadeIn 2s ease;
  margin-top:auto;
}
.footer span {
  display:block;
  font-size:.85rem;
  opacity:0.9;
  margin-top:4px;
}

/* ğŸŒ¸ Animations */
@keyframes fadeIn {
  from {opacity:0; transform:translateY(10px);}
  to {opacity:1; transform:translateY(0);}
}
@keyframes slideIn {
  from {opacity:0; transform:translateY(-20px);}
  to {opacity:1; transform:translateY(0);}
}
@keyframes fadeUp {
  from {opacity:0; transform:translateY(20px);}
  to {opacity:1; transform:translateY(0);}
}
@keyframes popIn {
  from {opacity:0; transform:scale(0.9);}
  to {opacity:1; transform:scale(1);}
}

/* MOBILE RESPONSIVE FIXES */
@media(max-width:768px){
  header{font-size:1.1rem;}
  main{padding:.8rem;}
  textarea{min-height:120px;}
  nav button{font-size:.9rem;}
}
@media(max-width:480px){
  nav{flex-direction:column;}
  nav button{border-bottom:1px solid var(--light-pink);}
  .card{padding:1rem;}
  #loginCard{margin-top:3rem;margin-bottom:5rem;}
  footer{position:relative;}
}
</style>
</head>
<body>

<!-- ğŸ’• Floating hearts -->
<div class="hearts" id="hearts"></div>

<header>ğŸ’ Daily Tracker4u ğŸ’</header>

<!-- LOGIN -->
<div id="loginCard" class="card">
  <h2 style="text-align:center;">Login</h2>
  <input id="username" placeholder="Username" />
  <input id="password" type="password" placeholder="Password" />
  <button onclick="login()">Login</button>
  <p id="loginMsg" style="color:var(--deep-pink);text-align:center;"></p>
</div>

<!-- NAV -->
<nav id="tabs" style="display:none;">
  <button data-tab="home" class="active">ğŸŒ… Home</button>
  <button data-tab="daily">ğŸ’Œ Daily</button>
  <button data-tab="health">ğŸ©º Health</button>
  <button data-tab="water">ğŸ’§ Water</button>
</nav>

<!-- MAIN -->
<main id="app" style="display:none;">
  <section id="home" class="active">
    <div class="card">
      <h2 id="greetText">ğŸŒ¸ Good Day!</h2>
      <p>Welcome backğŸ’–</p>
    </div>
    <div class="card">
      <h3>Todayâ€™s Summary ğŸŒˆ</h3>
      <p id="sumText">Loading...</p>
    </div>
  </section>

  <section id="daily">
    <div class="card">
      <h2>ğŸ’Œ Daily Note</h2>
      <input type="date" id="dailyDate"/>
      <textarea id="dailyText" placeholder="Ivala emaindho ikkada rasko....."></textarea>
      <select id="dailyMood">
        <option value="">Mood</option>
        <option>ğŸ¥° Happy</option>
        <option>ğŸ˜´ Sleepy</option>
        <option>ğŸ˜‡ Peaceful</option>
        <option>ğŸ¤’ Not well</option>
        <option>ğŸ¤© Excited</option>
      </select>
      <button class="save" onclick="saveDaily()">Save ğŸ’–</button>
    </div>
  </section>

  <section id="health">
    <div class="card">
      <h2>ğŸ©º Health Tracker</h2>
      <label>ğŸ˜Š Feeling</label>
      <select id="feeling">
        <option value="">Select</option>
        <option>Fine</option>
        <option>Tired</option>
        <option>Sick</option>
        <option>Cramps</option>
        <option>Headache</option>
      </select>
      <label>ğŸ˜´ Sleep (hours)</label>
      <input type="number" id="sleep" min="0" max="24" placeholder="e.g. 7"/>
      <label>ğŸ½ï¸ Tinnava</label>
      <select id="appetite">
        <option value="">Select</option>
        <option>Yes</option>
        <option>No</option>
        <option>Tinta</option>
      </select>
      <label>ğŸ’­ Symptoms</label>
      <div id="symptomsBox">
        <label><input type="checkbox" value="Cramps">Cramps</label>
        <label><input type="checkbox" value="Headache">Headache</label>
        <label><input type="checkbox" value="Cold">Cold</label>
        <label><input type="checkbox" value="Stress">Stress</label>
        <label><input type="checkbox" value="Back pain">Any Pain</label>
      </div>
      <button class="save" onclick="saveHealth()">Save ğŸ©·</button>
      <div id="healthTip" class="tip"></div>
    </div>
  </section>

  <section id="water">
    <div class="card">
      <h2>ğŸ’§ Water Tracker</h2>
      <input type="number" id="waterCups" min="0" max="20" placeholder="e.g. 8"/>
      <button class="save" onclick="saveWater()">Save ğŸ’§</button>
      <div id="waterTip" class="tip"></div>
    </div>
  </section>
</main>

<footer class="footer">
  ğŸ’—Made with Love n CareğŸ’—
  <span>-Nannaa</span>
</footer>

<script>
const API="https://fourcare.onrender.com/memories";
const allowedUsers={"8367226377":"Chinnuu19","admin":"adm"};
let loggedIn=false;

function login(){
  const u=document.getElementById("username").value.trim();
  const p=document.getElementById("password").value.trim();
  if(allowedUsers[u]===p){
    loggedIn=true;
    document.getElementById("loginCard").style.display="none";
    document.getElementById("tabs").style.display="flex";
    document.getElementById("app").style.display="block";
    setGreeting();
    loadSummary();
  } else {
    document.getElementById("loginMsg").textContent="Invalid login ğŸ’”";
  }
}

document.querySelectorAll("nav button").forEach(btn=>{
  btn.addEventListener("click",()=>{
    document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    const tab=btn.dataset.tab;
    document.querySelectorAll("main section").forEach(sec=>sec.classList.remove("active"));
    document.getElementById(tab).classList.add("active");
  });
});

function setGreeting(){
  const h=new Date().getHours();
  let text="Hello,ğŸ’•";
  if(h<12) text="â˜€ï¸ Good Morning Chinnuu!";
  else if(h<18) text="ğŸŒ¸ Good Afternoon Chinnuu!";
  else text="ğŸŒ™ Good Evening Chinnuu!";
  document.getElementById("greetText").textContent=text;
}

async function postData(data){
  await fetch(API,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)});
}

async function saveDaily(){
  const date=document.getElementById("dailyDate").value||new Date().toISOString().slice(0,10);
  const text=document.getElementById("dailyText").value.trim();
  const mood=document.getElementById("dailyMood").value;
  if(!text)return alert("Write something ğŸ’Œ");
  await postData({date,text,mood,section:"daily"});
  document.getElementById("dailyText").value="";
  document.getElementById("dailyMood").value="";
  alert("Saved successfully ğŸ’–");
  loadSummary();
}

async function saveHealth(){
  const date=new Date().toISOString().slice(0,10);
  const feeling=document.getElementById("feeling").value;
  const sleep=parseFloat(document.getElementById("sleep").value||0);
  const appetite=document.getElementById("appetite").value;
  const symptoms=[...document.querySelectorAll("#symptomsBox input:checked")].map(cb=>cb.value);
  await postData({date,feeling,sleep,appetite,symptoms,section:"health"});
  const tips=[];
  if(sleep&&sleep<6)tips.push("Try to rest a bit more tonight ğŸ˜´");
  else if(sleep>9)tips.push("Plenty of sleep! Keep your rhythm ğŸŒ¸");
  if(feeling==="Tired"||feeling==="Cramps")tips.push("Gentle stretching or warm tea might help ğŸ’•");
  if(appetite==="Low")tips.push("Eat small healthy meals today ğŸ");
  if(symptoms.includes("Stress"))tips.push("Take deep breaths and relax, Pookie ğŸŒ¼");
  document.getElementById("healthTip").textContent=tips.join(" ");
  document.querySelectorAll("#health input,#health select").forEach(el=>{
    if(el.type==="checkbox")el.checked=false;else el.value="";
  });
  loadSummary();
}

async function saveWater(){
  const date=new Date().toISOString().slice(0,10);
  const water=parseFloat(document.getElementById("waterCups").value||0);
  if(!water)return alert("Enter water intake ğŸ’§");
  await postData({date,water,section:"water"});
  const tip=document.getElementById("waterTip");
  if(water<6)tip.textContent="Drink a bit more water to stay hydrated ğŸ’§";
  else if(water>=8)tip.textContent="Perfect hydration! ğŸ¥°";
  else tip.textContent="Good job! Keep sipping through the day ğŸ’§";
  document.getElementById("waterCups").value="";
  loadSummary();
}

async function loadSummary(){
  try{
    const res=await fetch(API);
    const data=await res.json();
    if(!data.length)return;
    const today=new Date().toISOString().slice(0,10);
    const todayData=data.filter(d=>d.date===today);
    let text="No data yet ğŸ’•";
    if(todayData.length){
      const w=todayData.find(d=>d.section==="water");
      const h=todayData.find(d=>d.section==="health");
      const d=todayData.find(d=>d.section==="daily");
      text="";
      if(d)text+=`Mood: ${d.mood||"â€”"} | `;
      if(h&&h.sleep)text+=`Sleep: ${h.sleep} hrs | `;
      if(w&&w.water)text+=`Water: ${w.water} cups`;
    }
    document.getElementById("sumText").textContent=text;
  }catch(e){
    document.getElementById("sumText").textContent="Can't load summary ğŸ˜¢";
  }
}

/* Floating hearts generator */
const heartsContainer=document.getElementById("hearts");
for(let i=0;i<20;i++){
  const heart=document.createElement("div");
  heart.classList.add("heart");
  heart.textContent="ğŸ’–";
  heart.style.left=Math.random()*100+"%";
  heart.style.animationDuration=8+Math.random()*8+"s";
  heart.style.fontSize=1+Math.random()*1.5+"rem";
  heartsContainer.appendChild(heart);
}
</script>
</body>
</html>
